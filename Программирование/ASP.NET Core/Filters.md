**Filters (—Ñ–∏–ª—å—Ç—Ä—ã)** –≤ ASP.NET Core ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ **–¥–æ, –ø–æ—Å–ª–µ –∏–ª–∏ –≤–æ –≤—Ä–µ–º—è** –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π **–ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è** –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è).

## **üìå –í–∏–¥—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ ASP.NET Core**

| –í–∏–¥ —Ñ–∏–ª—å—Ç—Ä–∞       | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å              | –ö–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è                                                       |
| ----------------- | ---------------------- | ----------------------------------------------------------------------- |
| **Authorization** | `IAuthorizationFilter` | –ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞                                           |
| **Resource**      | `IResourceFilter`      | –î–æ –∏ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (–Ω–æ –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏)             |
| **Action**        | `IActionFilter`        | –î–æ –∏ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞                                |
| **Exception**     | `IExceptionFilter`     | –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π                                            |
| **Result**        | `IResultFilter`        | –î–æ –∏ –ø–æ—Å–ª–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º `View`) |

---

## **1Ô∏è‚É£ Authorization Filters (–§–∏–ª—å—Ç—Ä—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)**

–≠—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—ã **–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç**, –∏–º–µ–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–ø—Ä–∞–≤–æ** –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å. –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞—Ç—Ä–∏–±—É—Ç—ã **[Authorize]**.

```C#
[Authorize]
public class MyController : Controller
{
    public IActionResult SecureData()
    {
        return Ok("–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.");
    }
}

```

üîπ **–ö–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**  
–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–≤ `IAuthorizationFilter`:

```C#
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.Filters;

public class CustomAuthFilter : IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationFilterContext context)
    {
        bool isAuthenticated = false; // –ó–¥–µ—Å—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

        if (!isAuthenticated)
        {
            context.Result = new UnauthorizedResult();
        }
    }
}

```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**

```C#
[ServiceFilter(typeof(CustomAuthFilter))]
public class SecureController : Controller
{
    public IActionResult Secret()
    {
        return Ok("–í—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã!");
    }
}

```

---

## **2Ô∏è‚É£ Resource Filters (–§–∏–ª—å—Ç—Ä—ã —Ä–µ—Å—É—Ä—Å–æ–≤)**

–≠—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–¥–æ –∏ –ø–æ—Å–ª–µ** –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º, –Ω–æ **–¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–≤—è–∑–∫–∏ –º–æ–¥–µ–ª–∏**. –û–Ω–∏ –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

### **–ü—Ä–∏–º–µ—Ä: –ö–∞—Å—Ç–æ–º–Ω—ã–π Resource Filter**

```C#
using Microsoft.AspNetCore.Mvc.Filters;
using Microsoft.AspNetCore.Mvc;

public class ResourceLogFilter : IResourceFilter
{
    public void OnResourceExecuting(ResourceExecutingContext context)
    {
        Console.WriteLine("üöÄ –ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–∞");
    }

    public void OnResourceExecuted(ResourceExecutedContext context)
    {
        Console.WriteLine("‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–∞");
    }
}

```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**

```C#
[ServiceFilter(typeof(ResourceLogFilter))]
public class HomeController : Controller
{
    public IActionResult Index()
    {
        return Ok("Hello, ASP.NET Core!");
    }
}

```

---

## **3Ô∏è‚É£ Action Filters (–§–∏–ª—å—Ç—Ä—ã –¥–µ–π—Å—Ç–≤–∏–π)**

–≠—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–¥–æ –∏ –ø–æ—Å–ª–µ** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –û–Ω–∏ **–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç** –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–µ—Ç–æ–¥–∞.

### **–ü—Ä–∏–º–µ—Ä: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞**

```C#
using Microsoft.AspNetCore.Mvc.Filters;

public class ActionLoggingFilter : IActionFilter
{
    public void OnActionExecuting(ActionExecutingContext context)
    {
        Console.WriteLine($"‚û° –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–µ—Ç–æ–¥: {context.ActionDescriptor.DisplayName}");
    }

    public void OnActionExecuted(ActionExecutedContext context)
    {
        Console.WriteLine($"‚úî –ó–∞–≤–µ—Ä—à–µ–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞: {context.ActionDescriptor.DisplayName}");
    }
}

```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**

```C#
[ServiceFilter(typeof(ActionLoggingFilter))]
public class DemoController : Controller
{
    public IActionResult Test()
    {
        return Ok("–§–∏–ª—å—Ç—Ä –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç!");
    }
}

```

---

## **4Ô∏è‚É£ Exception Filters (–§–∏–ª—å—Ç—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π)**

–§–∏–ª—å—Ç—Ä—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª—è—é—Ç **–ª–æ–≤–∏—Ç—å** –æ—à–∏–±–∫–∏ –∏ **–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ**. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ **–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏** –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å **–∫–∞—Å—Ç–æ–º–Ω—ã–π JSON-–æ—Ç–≤–µ—Ç**.

### **–ü—Ä–∏–º–µ—Ä: –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π**

```C#
using Microsoft.AspNetCore.Mvc.Filters;
using Microsoft.AspNetCore.Mvc;

public class GlobalExceptionFilter : IExceptionFilter
{
    public void OnException(ExceptionContext context)
    {
        Console.WriteLine($"üî• –û—à–∏–±–∫–∞: {context.Exception.Message}");

        context.Result = new ObjectResult(new
        {
            Message = "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
            Error = context.Exception.Message
        })
        {
            StatusCode = 500
        };

        context.ExceptionHandled = true;
    }
}

```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**

```C#
[ServiceFilter(typeof(GlobalExceptionFilter))]
public class ErrorController : Controller
{
    public IActionResult ThrowError()
    {
        throw new Exception("–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –æ—à–∏–±–∫–∞!");
    }
}

```

üîπ –¢–µ–ø–µ—Ä—å –µ—Å–ª–∏ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –æ—à–∏–±–∫–∞, —Ñ–∏–ª—å—Ç—Ä **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω—ë—Ç JSON-–æ—Ç–≤–µ—Ç**.

---

## **5Ô∏è‚É£ Result Filters (–§–∏–ª—å—Ç—Ä—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)**

Result Filters **–∏–∑–º–µ–Ω—è—é—Ç** –∏–ª–∏ **–ª–æ–≥–∏—Ä—É—é—Ç** –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∏—Ö –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∫–ª–∏–µ–Ω—Ç—É.

### **–ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∫ –æ—Ç–≤–µ—Ç—É**

```C#
using Microsoft.AspNetCore.Mvc.Filters;
using Microsoft.AspNetCore.Mvc;

public class AddHeaderFilter : IResultFilter
{
    public void OnResultExecuting(ResultExecutingContext context)
    {
        context.HttpContext.Response.Headers.Add("X-Custom-Header", "Hello from Filter!");
    }

    public void OnResultExecuted(ResultExecutedContext context)
    {
        Console.WriteLine("üì© –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω!");
    }
}

```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**

```C#
[ServiceFilter(typeof(AddHeaderFilter))]
public class HeaderController : Controller
{
    public IActionResult Index()
    {
        return Ok("–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞!");
    }
}

```

---

## **6Ô∏è‚É£ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã**

–§–∏–ª—å—Ç—Ä—ã –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å **–Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞**, –Ω–æ –∏ **–≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**.

### **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞**

–í `Program.cs`:

```C#
builder.Services.AddControllers(options =>
{
    options.Filters.Add(typeof(GlobalExceptionFilter)); // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≥–ª–æ–±–∞–ª—å–Ω–æ
});

```

–¢–µ–ø–µ—Ä—å **–≤—Å–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** –∏—Å–ø–æ–ª—å–∑—É—é—Ç `GlobalExceptionFilter`.

---

## **7Ô∏è‚É£ –ö–∞–∫ —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ?**

–§–∏–ª—å—Ç—Ä—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ**:

1Ô∏è‚É£ **Authorization** (–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)  
2Ô∏è‚É£ **Resource (–¥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞)**  
3Ô∏è‚É£ **Action (–¥–æ –º–µ—Ç–æ–¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞)**  
4Ô∏è‚É£ **–ú–µ—Ç–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞**  
5Ô∏è‚É£ **Action (–ø–æ—Å–ª–µ –º–µ—Ç–æ–¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞)**  
6Ô∏è‚É£ **Result (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞)**  
7Ô∏è‚É£ **Resource (–ø–æ—Å–ª–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞)**  
8Ô∏è‚É£ **Exception (–µ—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞)**

---

## **–í—ã–≤–æ–¥—ã**

‚úÖ **–§–∏–ª—å—Ç—Ä—ã –ø–æ–º–æ–≥–∞—é—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å** –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –∫–æ–¥ (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—à–∏–±–∫–∏, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ).  
‚úÖ **–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã**, –Ω–∞—Å–ª–µ–¥—É—è—Å—å –æ—Ç `IActionFilter`, `IExceptionFilter` –∏ –¥—Ä—É–≥–∏—Ö.  
‚úÖ **–§–∏–ª—å—Ç—Ä—ã –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å** –ª–æ–∫–∞–ª—å–Ω–æ (–≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ) –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ (–¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è).  
‚úÖ **PLINQ + —Ñ–∏–ª—å—Ç—Ä—ã** ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ASP.NET Core API.

üîπ **–ì–¥–µ –ø–æ–ª–µ–∑–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã?**  
‚úî –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤  
‚úî –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö  
‚úî –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫  
‚úî –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

üî• –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã **–ø—Ä–∞–≤–∏–ª—å–Ω–æ**, –∏ –≤–∞—à –∫–æ–¥ —Å—Ç–∞–Ω–µ—Ç **—á–∏—â–µ –∏ –≥–∏–±—á–µ!** üòÉüöÄ