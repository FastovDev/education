–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Äî –≤–∞–∂–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞—â–∏—Ç—ã –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

üìå **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** ‚Äî –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏—á–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å, —Ç–æ–∫–µ–Ω).  
üìå **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–µ—Ç –ª–∏ –æ–Ω –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ).

–í ASP.NET Core –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:  
‚úî **JWT (JSON Web Token)** ‚Äî —Ç–æ–∫–µ–Ω-–±–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  
‚úî **OAuth 2.0** ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤  
‚úî **Identity** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

# **1Ô∏è‚É£ JWT (JSON Web Token)**

JWT ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç —Ç–æ–∫–µ–Ω–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.

‚úÖ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç JWT?**

1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **–ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å**
2. –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –≤—ã–¥–∞—ë—Ç **JWT-—Ç–æ–∫–µ–Ω**
3. –ö–ª–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–∫–µ–Ω –≤ **–∑–∞–ø—Ä–æ—Å–∞—Ö –∫ API**
4. –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –∏ –¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø

---

## **üìå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ JWT –≤ ASP.NET Core**

### **1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

–î–æ–±–∞–≤—å—Ç–µ –ø–∞–∫–µ—Ç `Microsoft.AspNetCore.Authentication.JwtBearer`:

```sh
dotnet add package Microsoft.AspNetCore.Authentication.JwtBearer

```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ JWT –≤ `Program.cs`**

```C#
var builder = WebApplication.CreateBuilder(args);
var key = Encoding.UTF8.GetBytes("SuperSecretKey12345!");

builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)
    .AddJwtBearer(options =>
    {
        options.TokenValidationParameters = new TokenValidationParameters
        {
            ValidateIssuer = false,
            ValidateAudience = false,
            ValidateLifetime = true,
            ValidateIssuerSigningKey = true,
            IssuerSigningKey = new SymmetricSecurityKey(key)
        };
    });

builder.Services.AddAuthorization();
var app = builder.Build();

app.UseAuthentication();
app.UseAuthorization();

app.MapGet("/secure", (HttpContext context) =>
{
    return Results.Ok("üîí –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω");
}).RequireAuthorization();

app.Run();

```

---

### **3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT-—Ç–æ–∫–µ–Ω–∞**

–°–æ–∑–¥–∞—ë–º `TokenService` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ JWT:

```C#
public class TokenService
{
    private const string SecretKey = "SuperSecretKey12345!";
    
    public static string GenerateToken(string username)
    {
        var key = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(SecretKey));
        var credentials = new SigningCredentials(key, SecurityAlgorithms.HmacSha256);

        var claims = new List<Claim>
        {
            new Claim(ClaimTypes.Name, username)
        };

        var token = new JwtSecurityToken(
            expires: DateTime.UtcNow.AddHours(1),
            signingCredentials: credentials,
            claims: claims);

        return new JwtSecurityTokenHandler().WriteToken(token);
    }
}

```

---

### **4. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –ª–æ–≥–∏–Ω–∞**

```C#
[ApiController]
[Route("[controller]")]
public class AuthController : ControllerBase
{
    [HttpPost("login")]
    public IActionResult Login([FromBody] LoginModel model)
    {
        if (model.Username == "admin" && model.Password == "password")
        {
            var token = TokenService.GenerateToken(model.Username);
            return Ok(new { token });
        }
        return Unauthorized();
    }
}

public class LoginModel
{
    public string Username { get; set; }
    public string Password { get; set; }
}

```

‚úÖ –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ POST-–∑–∞–ø—Ä–æ—Å–∞ `/auth/login` —Å **–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏** –º—ã –ø–æ–ª—É—á–∏–º JWT-—Ç–æ–∫–µ–Ω.

üìå **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω?**  
–ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–≥–æ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer {token}` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.

---

# **2Ô∏è‚É£ OAuth 2.0**

OAuth 2.0 ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ **Google, Facebook, GitHub –∏ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã**.

‚úÖ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç OAuth?**

1. –ö–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ–≥–∏–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Google)
2. Google –≤—ã–¥–∞—ë—Ç –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
3. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
4. –°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –æ—Ç Google
5. –¢–æ–∫–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

## **üìå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OAuth 2.0 —Å Google**

### **1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞**

```sh
dotnet add package Microsoft.AspNetCore.Authentication.Google

```

### **2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `Program.cs`**

```C#
var builder = WebApplication.CreateBuilder(args);

builder.Services.AddAuthentication(options =>
{
    options.DefaultScheme = CookieAuthenticationDefaults.AuthenticationScheme;
    options.DefaultChallengeScheme = GoogleDefaults.AuthenticationScheme;
})
.AddCookie()
.AddGoogle(options =>
{
    options.ClientId = "your-google-client-id";
    options.ClientSecret = "your-google-client-secret";
});

var app = builder.Build();

app.UseAuthentication();
app.UseAuthorization();

app.MapGet("/google-login", async (HttpContext context) =>
{
    await context.ChallengeAsync(GoogleDefaults.AuthenticationScheme, new AuthenticationProperties()
    {
        RedirectUri = "/"
    });
});

app.Run();

```

‚úÖ –¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ª–æ–≥–∏–Ω–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ **Google**.

---

# **3Ô∏è‚É£ Identity –≤ ASP.NET Core**

ASP.NET Core Identity ‚Äî —ç—Ç–æ **–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è:  
‚úî **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –≤—Ö–æ–¥**  
‚úî **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**  
‚úî **–†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**

---

## **üìå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Identity –≤ ASP.NET Core**

### **1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤**

```sh
dotnet add package Microsoft.AspNetCore.Identity.EntityFrameworkCore
dotnet add package Microsoft.EntityFrameworkCore.SqlServer

```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `IdentityDbContext`**

–°–æ–∑–¥–∞–¥–∏–º **–∫–æ–Ω—Ç–µ–∫—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**:

```C#
public class AppDbContext : IdentityDbContext<IdentityUser>
{
    public AppDbContext(DbContextOptions<AppDbContext> options) : base(options) { }
}

```

---

### **3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Identity –≤ `Program.cs`**

```C#
var builder = WebApplication.CreateBuilder(args);

builder.Services.AddDbContext<AppDbContext>(options =>
    options.UseSqlServer("Server=localhost;Database=IdentityDb;Trusted_Connection=True;"));

builder.Services.AddIdentity<IdentityUser, IdentityRole>()
    .AddEntityFrameworkStores<AppDbContext>()
    .AddDefaultTokenProviders();

builder.Services.AddAuthentication();
builder.Services.AddAuthorization();

var app = builder.Build();

app.UseAuthentication();
app.UseAuthorization();

app.Run();

```

---

### **4. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

```C#
[ApiController]
[Route("[controller]")]
public class AccountController : ControllerBase
{
    private readonly UserManager<IdentityUser> _userManager;
    private readonly SignInManager<IdentityUser> _signInManager;

    public AccountController(UserManager<IdentityUser> userManager, SignInManager<IdentityUser> signInManager)
    {
        _userManager = userManager;
        _signInManager = signInManager;
    }

    [HttpPost("register")]
    public async Task<IActionResult> Register([FromBody] RegisterModel model)
    {
        var user = new IdentityUser { UserName = model.Email, Email = model.Email };
        var result = await _userManager.CreateAsync(user, model.Password);

        if (result.Succeeded)
            return Ok("‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω!");

        return BadRequest(result.Errors);
    }
}

public class RegisterModel
{
    public string Email { get; set; }
    public string Password { get; set; }
}

```

‚úÖ –¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º **—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö!

---

# **–í—ã–≤–æ–¥—ã**

|–ú–µ—Ç–æ–¥|–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ|
|---|---|
|**JWT**|API, SPA, –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è|
|**OAuth**|–í—Ö–æ–¥ —á–µ—Ä–µ–∑ —Å–æ—Ü—Å–µ—Ç–∏|
|**Identity**|–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏|

‚úÖ **JWT** –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **REST API**  
‚úÖ **OAuth** —É–¥–æ–±–µ–Ω –¥–ª—è **—Å–æ—Ü—Å–µ—Ç–µ–π**  
‚úÖ **Identity** –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö —Å–∞–π—Ç–æ–≤**

üîí –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–Ω–∞–¥–µ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è** –∏ **–∑–∞—â–∏—â–∞–π—Ç–µ —Ç–æ–∫–µ–Ω—ã**! üöÄ