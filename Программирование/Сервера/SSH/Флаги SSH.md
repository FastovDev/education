### Производительность

Для более быстрой передачи данных можно включить сжатие добавив при подключении флаг -C

`ssh -C user@server`

**УТОЧНИТЬ КАК РАБОТАЕТ СЖАТИЕ**

### Настройка туннелей и портов


Есть 3 вида туннелирования:

Локальное туннелирования, когда мы обеспечиваем туннель с хоста на удаленную машину

`ssh -L local_port:destination_host:destination_port user@server`

Удаленное туннелирование, когда мы обеспечиваем туннель с удаленной машины на хост

`ssh -R remote_port:local_host:local_port user@server`

Динамическое туннелирования, с использованием протокола SOCKS, когда мы обеспечиваем динамическое использование портов хоста и удаленной машины

`ssh -D 8080 user@server`

**УТОЧНИТЬ КАК РАБОТАЕТ И ЧТО ТАКОЕ SOCKS**


### **Базовые флаги**

|Флаг|Описание|Пример|
|---|---|---|
|`-l <username>`|Указывает имя пользователя для подключения.|`ssh -l user host`|
|`-p <port>`|Указывает порт для подключения. По умолчанию используется `22`.|`ssh -p 2222 user@host`|
|`-i <identity_file>`|Указывает файл приватного ключа для аутентификации.|`ssh -i ~/.ssh/id_rsa user@host`|
|`-T`|Отключает псевдотерминал. Используется для выполнения команды на удалённом сервере.|`ssh -T user@host`|
|`-q`|Режим тишины — отключает все диагностические сообщения.|`ssh -q user@host`|
|`-v`, `-vv`, `-vvv`|Включает подробный вывод для отладки. Один флаг `-v` — базовый уровень, `-vv` и `-vvv` — детальнее.|`ssh -vv user@host`|
|`-C`|Включает сжатие данных для ускорения передачи.|`ssh -C user@host`|

---

### **Аутентификация**

|Флаг|Описание|Пример|
|---|---|---|
|`-o <option>`|Задает параметры подключения в формате ключ=значение (например, ключи или агент).|`ssh -o IdentityFile=~/.ssh/id_rsa user@host`|
|`-A`|Включает перенаправление SSH-агента (используется для передачи аутентификации).|`ssh -A user@host`|
|`-a`|Отключает перенаправление SSH-агента.|`ssh -a user@host`|
|`-K`|Включает аутентификацию Kerberos.|`ssh -K user@host`|
|`-k`|Отключает аутентификацию Kerberos.|`ssh -k user@host`|

---

### **Псевдотерминал и команды**

|Флаг|Описание|Пример|
|---|---|---|
|`-t`|Принудительно включает псевдотерминал (даже если команда передается).|`ssh -t user@host "bash"`|
|`-T`|Отключает псевдотерминал. Используется для выполнения скриптов.|`ssh -T user@host`|

---

### **Перенаправление портов**

|Флаг|Описание|Пример|
|---|---|---|
|`-L <local_port>:<remote_host>:<remote_port>`|Пробрасывает порт с удалённого хоста на локальный.|`ssh -L 8080:localhost:80 user@host`|
|`-R <remote_port>:<local_host>:<local_port>`|Пробрасывает порт с локального хоста на удалённый.|`ssh -R 8080:localhost:80 user@host`|
|`-D <local_port>`|Создает динамический SOCKS-прокси.|`ssh -D 1080 user@host`|

---

### **Конфигурационные файлы**

|Флаг|Описание|Пример|
|---|---|---|
|`-F <file>`|Указывает пользовательский конфигурационный файл SSH.|`ssh -F custom_config user@host`|

---

### **Дополнительные параметры**

|Флаг|Описание|Пример|
|---|---|---|
|`-N`|Не выполнять команды на сервере. Используется для проброса портов.|`ssh -N -L 8080:localhost:80 user@host`|
|`-f`|Переводит процесс SSH в фоновый режим после подключения.|`ssh -f -N user@host`|
|`-X`|Включает перенаправление X11.|`ssh -X user@host`|
|`-x`|Отключает перенаправление X11.|`ssh -x user@host`|
|`-E <log_file>`|Указывает файл для записи журнала отладки.|`ssh -E debug.log user@host`|
|`-M`|Включает мастер-соединение (контрольный канал для мультиплексирования).|`ssh -M user@host`|
|`-S <control_path>`|Указывает путь к файлу контрольного канала.|`ssh -S /tmp/ssh_mux user@host`|

---

### **Отладка и тестирование**

|Флаг|Описание|Пример|
|---|---|---|
|`-v`, `-vv`, `-vvv`|Режим отладки (разные уровни детализации).|`ssh -vv user@host`|
|`-q`|Тихий режим (никаких сообщений).|`ssh -q user@host`|

---

### **Пример полного подключения**

bash

Копировать код

`ssh -i ~/.ssh/id_rsa -p 2222 -L 8080:localhost:80 -o Compression=yes user@remote_host`

- Подключение с приватным ключом.
- Использование порта 2222.
- Проброс локального порта 8080 на удалённый 80.
- С включённым сжатием.

### **Вывод**

Флаги SSH позволяют настроить соединение под любые задачи: от перенаправления портов до отладки и управления ключами. Рекомендуется изучить их в зависимости от ваших сценариев использования.
