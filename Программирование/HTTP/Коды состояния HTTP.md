HTTP-коды состояния — это трехзначные числа, возвращаемые сервером в ответ на запрос клиента. Они информируют о результате обработки запроса. Основные категории:

## 1. Информационные (1xx)

- **Пример:** 100 Continue, 101 Switching Protocols
- **Назначение:** Уведомление о том, что запрос получен и процесс его обработки продолжается. Применяются редко в практике.

## 2. Успешные (2xx)

- **Пример:**
    - **200 OK:** Запрос выполнен успешно, результат передан в теле ответа.
    - **201 Created:** Ресурс успешно создан (обычно при POST-запросе).
    - **204 No Content:** Запрос выполнен успешно, но тело ответа отсутствует.
- **Назначение:** Подтверждение успешного завершения запроса.

## 3. Перенаправления (3xx)

- **Пример:**
    - **301 Moved Permanently:** Запрашиваемый ресурс перемещён на новый URL.
    - **302 Found:** Ресурс временно перемещён.
    - **304 Not Modified:** Ресурс не изменялся (используется для кэширования).
- **Назначение:** Информируют, что для получения ресурса клиенту нужно выполнить дополнительные действия (например, перейти по другому URL).

## 4. Ошибки клиента (4xx)

- **Пример:**
    - **400 Bad Request:** Неверный запрос, сервер не понимает его синтаксиса.
    - **401 Unauthorized:** Требуется аутентификация.
    - **403 Forbidden:** Доступ к ресурсу запрещён.
    - **404 Not Found:** Ресурс не найден.
- **Назначение:** Указывают на ошибки, вызванные некорректным запросом клиента.

## 5. Ошибки сервера (5xx)

- **Пример:**
    - **500 Internal Server Error:** Внутренняя ошибка сервера.
    - **502 Bad Gateway:** Ошибка шлюза или прокси.
    - **503 Service Unavailable:** Сервис временно недоступен (например, из-за перегрузки или обслуживания).
- **Назначение:** Информируют, что сервер не смог обработать корректно запрос из-за внутренних проблем.

---

# Работа с заголовками HTTP

Заголовки в HTTP используются для передачи дополнительной информации между клиентом и сервером. Они делятся на несколько категорий:

## 1. Заголовки запроса

- **Примеры:**
    - **Accept:** Указывает, какие типы медиа клиент готов принять (например, `application/json`).
    - **Authorization:** Передача учетных данных (токен, базовая авторизация).
    - **User-Agent:** Информация о клиентском приложении или браузере.
    - **Content-Type:** Указывает тип содержимого, передаваемого в теле запроса (например, `application/json` при POST или PUT).

## 2. Заголовки ответа

- **Примеры:**
    - **Content-Type:** Тип возвращаемого содержимого (например, `text/html`, `application/json`).
    - **Content-Length:** Размер тела ответа в байтах.
    - **Cache-Control:** Инструкции по кэшированию для клиента.
    - **Set-Cookie:** Передача данных для установки cookie на стороне клиента.
    - **Location:** Используется при перенаправлении (3xx коды) для указания нового URL.

## 3. Пример работы с заголовками в C# с использованием HttpClient

### Чтение заголовков ответа:

```C#
using System;
using System.Net.Http;
using System.Threading.Tasks;

public async Task ReadResponseHeadersAsync()
{
    using HttpClient client = new HttpClient();
    HttpResponseMessage response = await client.GetAsync("https://example.com/api/products/123");

    // Проверяем успешность запроса
    if (response.IsSuccessStatusCode)
    {
        Console.WriteLine($"Статус: {response.StatusCode}"); // Например, 200 OK

        // Чтение заголовка Content-Type
        if (response.Content.Headers.ContentType != null)
        {
            Console.WriteLine($"Content-Type: {response.Content.Headers.ContentType}");
        }

        // Перебор всех заголовков ответа
        foreach (var header in response.Headers)
        {
            Console.WriteLine($"{header.Key}: {string.Join(", ", header.Value)}");
        }
    }
}

```

### Установка заголовков запроса:

```C#
using System;
using System.Net.Http;
using System.Net.Http.Headers;
using System.Threading.Tasks;

public async Task SendRequestWithHeadersAsync()
{
    using HttpClient client = new HttpClient();

    // Установка заголовка User-Agent
    client.DefaultRequestHeaders.UserAgent.ParseAdd("MyApp/1.0");

    // Установка заголовка Authorization
    client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", "your-token-here");

    // Отправка запроса с дополнительными заголовками
    HttpResponseMessage response = await client.GetAsync("https://example.com/api/products");

    if (response.IsSuccessStatusCode)
    {
        Console.WriteLine("Запрос выполнен успешно.");
    }
}
```
## 4. Практические советы

- **Кэширование:**  
    Используйте заголовки `Cache-Control`, `ETag` и `Last-Modified` для управления кэшированием, чтобы снизить нагрузку на сервер.
    
- **Безопасность:**  
    Заголовки `Authorization` и `Set-Cookie` критически важны для обеспечения безопасности передачи данных. Обязательно используйте HTTPS.
    
- **Контент:**  
    Указывайте `Content-Type` при отправке данных (например, `application/json` или `multipart/form-data` для файлов), чтобы сервер корректно интерпретировал содержимое.
    

---

# Итог

- **HTTP-коды состояния** дают возможность понять результат обработки запроса, а их категория (1xx, 2xx, 3xx, 4xx, 5xx) помогает быстро ориентироваться в типе ответа.
- **Заголовки HTTP** служат для передачи метаданных, которые управляют поведением клиента и сервера, обеспечивают безопасность, кэширование, а также помогают корректно обрабатывать содержимое запроса и ответа.

Эти знания критически важны при разработке и отладке веб-приложений, API и интеграционных сервисов. Если возникнут вопросы или потребуется дополнительная информация – обращайтесь!